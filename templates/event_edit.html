{% extends "base.html" %}
{% load i18n %}

{% block container %}

<h1>{% trans "Event form" %}:</h1>
<div id="event_form">
    {% if form.errors %}
        <p class="errorlist">
            {% blocktrans count form.errors|length as counter %}
            Please correct the following error
            {% plural %}Please correct the following errors
            {% endblocktrans %}
        </p>
        {% if form.non_field_errors %}
            {{ form.non_field_errors }}
        {% endif %}
    {% endif %}
    <form action="" method="post">{% csrf_token %}
        <table>
            {{ form.as_table }}
        </table>
        <!-- urls -->
        <div id="url_table">
            {%for f in formset_url.management_form%}
                {{f}}
            {%endfor%}
            <table>
                <tr>
                    {% for field in formset_url.forms.0 %}
                        {% if not field.is_hidden %}
                            <th>{{field.label}}</th>
                        {% endif %}
                    {% endfor %}
                </tr>
                {%for f in formset_url.forms%}
                <tr>
                    {%for field in f%} 
                        {% if not field.is_hidden %}
                            <td valign="bottom">{{field}}</td>
                        {%else%}
                            {{field}}
                        {% endif %}
                    {%endfor%}
                </tr>
                {%endfor%}
            </table>
        </div>
        <!-- sessions -->
        <div id="session_table">
            {%for f in formset_session.management_form%}
                {{f}}
            {%endfor%}
            <table>
                <tr>
                    {% for field in formset_session.forms.0 %}
                        {% if not field.is_hidden %}
                            <th>{{field.label}}</th>
                        {% endif %}
                    {% endfor %}
                </tr>
                {%for f in formset_session.forms%}
                <tr>
                    {%for field in f%} 
                        {% if not field.is_hidden %}
                            <td valign="bottom">{{field}}</td>
                        {%else%}
                            {{field}}
                        {% endif %}
                    {%endfor%}
                </tr>
                {%endfor%}
            </table>
        </div>
        <!-- deadlines -->
        <div id="deadline_table">
            {%for f in formset_deadline.management_form%}
                {{f}}
            {%endfor%}
            <table>
                <tr>
                    {% for field in formset_deadline.forms.0 %}
                        {% if not field.is_hidden %}
                            <th>{{field.label}}</th>
                        {% endif %}
                    {% endfor %}
                </tr>
                {%for f in formset_deadline.forms%}
                <tr>
                    {%for field in f%} 
                        {% if not field.is_hidden %}
                            <td valign="bottom">{{field}}</td>
                            {%else%}
                            {{field}}
                        {% endif %}
                    {%endfor%}
                </tr>
                {%endfor%}
            </table>
        </div>
        <input type="submit" value={% trans "Save" %}>
    </form>
</div>
<div class="info">
    <a href="{% url event_edit_raw event_id %}">{% trans "edit as text" %}</a>
    ({% trans "Warning: unsaved changes in the form above will be lost" %})
</div>
{% endblock %}

